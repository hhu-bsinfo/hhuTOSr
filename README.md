# Aufgabe 14: Eine eigene BS-Erweiterung / Anwendung (Isolation & Schutz - Aufgabe 7)

Zum Abschluss sollen Sie wieder eine eigene Erweiterung oder eine Anwendung für Ihr Betriebssystem schreiben. Sie können sich dabei an den untenstehenden Vorschlägen orientieren, oder selbst etwas ausdenken. Natürlich dürfen Sie auch Ihre Anwendung aus dem Kurs "Betriebssystementwicklung" weiter entwickeln.

Hier sind einige Ideen für Erweiterungen Ihres Betriebssystems:
 - **User Mode Anwendungen mit mehreren Threads**: Aktuell hat jede Anwendung nur einen einzelnen Thread, der ihre `main()` Funktion ausführt. Es wäre jedoch wünschenswert, wenn eine Anwendung selbst neue Threads in ihrem Adressraum starten könnte.
 - **Aufräumen von Prozess/Thread Ressourcen**: Threads und Prozesse können aktuell zwar beendet werden, jedoch werden die von Ihnen verwendeten Ressourcen nicht wieder freigegeben.  
 Bei Threads wird der Kernel Stack nie freigegeben. Eigentlich würde am Ende von `scheduler::exit()` automatisch `drop()` für den beendeten Thread aufgerufen werden, da dieser nun nirgendwo mehr gespeichert ist (weder in der `ready_queue` noch in `active_thread`). Allerdings rufen wir vorher noch `Thread::switch()` auf und kehren nie wieder zurück. Dadurch wird das Thread Struct nicht gedroppt und somit auch der Kernel Stack nicht freigegeben. Wir dürfen den Thread aber nicht manuell vorher droppen, da `Thread::switch()` ja auch noch auf den beendeten Thread zugreift.  
 Bei Prozessen ist es so, dass wir die VMAs ja ohnehin manuell mit unserem Page Frame Allokator verwalten. Wir müssen sie also auch manuell wieder freigeben, wenn ein Prozess beendet wird. Außerdem sollten die von den Page Tables verwendeten Page Frames noch freigegeben werden.
 - **Erweiterung des Schedulers**: Für den Scheduler sind verschiedene Erweiterungen denkbar. Z.B. könnten Funktionen eingefügt werden, um Threads schlafen zu legen oder zu joinen (auf das Beenden eines anderen Threads zu warten). Außerdem könnten auch Prioritäten eingeführt werden.
 - **Terminal**: Ein Terminal, welches Anwendungen aus dem TAR-Archiv starten kann. Hierbei soll das Terminal selbst auch eine User Space Anwendung sein. Zum Starten anderer Anwendungen muss dementsprechend ein System Call eingeführt werden. Außerdem benötigt man einen Mechanismus, um auf die Beendigung einer laufenden Anwendung zu warten. Zur Demonstration sollten verschiedene kleinere Anwendungen/Demos implementiert werden, die vom Terminal aus gestartet werden können.
